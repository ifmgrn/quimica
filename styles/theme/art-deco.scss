/*
	Copyright (c) 2025 ifmgrn
	Licensed under the GNU AGPL-3.0 License.
	See LICENSE.txt for details.
*/

// Inclui decorações de arte e aplica um frame no topo

@use "utils" as *;

@use "settings" as *;

@if $art-deco-color == "accent" {
	$art-deco-color: get($accent-color, var(--primary-background)) !global;
}

@if $enable-art-deco-top-frame {
	$include-art-deco: true !global;

	header {
		padding-top: 0 !important;
	}

	#{$art-deco-top-frame} {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		border-bottom: 1px solid #{$art-deco-color};
	}

	#{$art-deco-top-frame}::after {
		$mask-repeat: no-repeat;
		$mask-position: center;
		$mask-size: auto var(--top-art-deco-frame-size);

		position: absolute;
		right: 0;
		bottom: 0;
		left: 0;
		z-index: 10;
		display: block;
		height: var(--top-art-deco-frame-size);
		background-image: var(--art-deco-gradient);

		/* "mask" ainda não é amplamente suportado, temos que usar o prefixo "-webkit" */
		/* stylelint-disable-next-line property-no-vendor-prefix */
		-webkit-mask-image: var(--art-deco-bottom-frame);
		/* stylelint-disable-next-line plugin/use-baseline */
		mask-image: var(--art-deco-bottom-frame);
		/* stylelint-disable-next-line property-no-vendor-prefix */
		-webkit-mask-position: $mask-position;
		/* stylelint-disable-next-line plugin/use-baseline */
		mask-position: $mask-position;
		/* stylelint-disable-next-line property-no-vendor-prefix */
		-webkit-mask-repeat: $mask-repeat;
		/* stylelint-disable-next-line plugin/use-baseline */
		mask-repeat: $mask-repeat;
		/* stylelint-disable-next-line property-no-vendor-prefix */
		-webkit-mask-size: $mask-size;
		/* stylelint-disable-next-line plugin/use-baseline */
		mask-size: $mask-size;
		transform: scaleY(-1) translateY(calc(-100% + 6px));
		pointer-events: none;
		content: "";
	}

	#{$art-deco-top-frame} + * {
		margin-top: var(--top-art-deco-frame-size);
	}
}

@mixin resources {
	@if $include-art-deco {
		--art-deco-gradient: linear-gradient(
			150deg,
			#{$art-deco-color} 0%,
			#{css-color-mix(lab, $art-deco-color, #fff, 3%) 26%},
			#{css-color-mix(lab, $art-deco-color, #fff, 20%) 45%},
			#{css-color-mix(lab, $art-deco-color, #fff, 40%) 51%},
			#{css-color-mix(lab, $art-deco-color, #fff, 7%) 80%}
		);
		--art-deco-bottom-frame: url("data:image/svg+xml,%0A%3Csvg width='104.36078mm' height='11.870854mm' viewBox='0 0 104.36078 11.870854' version='1.1' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cg transform='translate(-20.837109,-110.17865)' style='fill:none;stroke:%23000000;stroke-width:0.352778;stroke-linejoin:miter;'%3E%3Crect width='1.7521752' height='1.7521752' x='136.00464' y='32.742298' transform='rotate(45)' /%3E%3Crect width='1.1171812' height='1.1171812' x='134.88745' y='31.625116' transform='rotate(45)' /%3E%3Cpath d='m 69.40488,113.25396 v 2.45552 l 2.82265,2.82265 v -8.35348' /%3E%3Cpath d='m 76.630118,113.25397 v 2.45552 l -2.82265,2.82265 v -8.35348' /%3E%3Cpath d='m 75.3137,117.02589 v -5.1879 h -2.296204 -2.296204 v 5.1879' /%3E%3Cpath d='m 72.22753,118.53213 -1.526899,1.5269 H 20.837109' /%3E%3Cpath d='m 71.410515,119.34914 -2.153922,-2.15392 H 54.097149' /%3E%3Cpath d='m 69.256593,117.19522 -1.329776,2.86381' /%3E%3Cpath d='m 67.991909,117.19522 -1.329776,2.86381' /%3E%3Cpath d='m 66.652143,117.19522 -0.673746,1.45098 h -4.433579' /%3E%3Ccircle cx='60.903217' cy='118.64232' r='0.64161199' /%3E%3Cpath d='M 60.261605,118.64232 H 50.642956' /%3E%3Cpath d='m 73.807468,118.53214 1.526899,1.5269 h 49.863523' /%3E%3Cpath d='m 74.624483,119.34915 2.153922,-2.15392 h 15.159449' /%3E%3Cpath d='m 76.778405,117.19523 1.329776,2.86381' /%3E%3Cpath d='m 78.043089,117.19523 1.329776,2.86381' /%3E%3Cpath d='m 79.382855,117.19523 0.673746,1.45098 h 4.433579' /%3E%3Ccircle cx='-85.131783' cy='118.64233' r='0.64161199' /%3E%3Cpath d='m 85.773393,118.64233 h 9.618651' /%3E%3C/g%3E%3C/svg%3E%0A");
		--art-deco-h-top-left: url("data:image/svg+xml,%0A%3Csvg width='15.769768mm' height='15.723796mm' viewBox='0 0 15.769766 15.723796' version='1.1' xml:space='preserve' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern xlink:href='%23pattern18' preserveAspectRatio='xMidYMid' id='pattern33' patternTransform='matrix(0.35355339,0.35355339,-0.35355339,0.35355339,0,0)' x='1.20000005' y='0' /%3E%3Cpattern xlink:href='%23Strips1_2' preserveAspectRatio='xMidYMid' id='pattern18' patternTransform='rotate(45)' x='1.2' y='0' /%3E%3Cpattern patternUnits='userSpaceOnUse' width='3' height='1' patternTransform='translate(0,0) scale(2,2)' preserveAspectRatio='xMidYMid' id='Strips1_2' style='fill:%23000000'%3E%3Crect style='stroke:none' x='0' y='-0.5' width='1' height='2' /%3E%3C/pattern%3E%3C/defs%3E%3Cg transform='translate(13.81997,-136.66645)' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1'%3E%3Cpath d='M 1.9497135,140.37029 H -0.607187' /%3E%3Cpath style='fill:url(%23pattern33);fill-opacity:1' d='m 13.56983,147.58687 a 10.664035,10.664035 0 0 1 -7.5453295,-3.12218 10.664035,10.664035 0 0 1 -3.1246656,-7.5443 l 10.6640341,0.002 z' transform='scale(-1,1)' /%3E%3Cpath d='m 1.9497135,136.91659 c 0,0 -1.2959741,4.4e-4 -2.1061065,0 0.0033,3.55259 -1.408423,6.96675 -3.924165,9.48397 -2.515742,2.51722 -5.929061,3.93075 -9.487905,3.92975 v 2.05994' /%3E%3Cpath d='m -10.20726,152.39025 v -2.48697' /%3E%3C/g%3E%3C/svg%3E%0A");
		--art-deco-h-top-right: url("data:image/svg+xml,%0A%3Csvg width='15.769768mm' height='15.723796mm' viewBox='0 0 15.769766 15.723796' version='1.1' xml:space='preserve' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cdefs id='defs1'%3E%3Cpattern xlink:href='%23pattern18' preserveAspectRatio='xMidYMid' id='pattern33' patternTransform='matrix(0.35355339,0.35355339,-0.35355339,0.35355339,-11.870171,0)' x='1.20000005' y='0' /%3E%3Cpattern xlink:href='%23Strips1_2' preserveAspectRatio='xMidYMid' id='pattern18' patternTransform='rotate(45)' x='1.2' y='0' /%3E%3Cpattern patternUnits='userSpaceOnUse' width='3' height='1' patternTransform='translate(0,0) scale(2,2)' preserveAspectRatio='xMidYMid' id='Strips1_2' style='fill:%23000000'%3E%3Crect style='stroke:none' x='0' y='-0.5' width='1' height='2' id='rect146' /%3E%3C/pattern%3E%3C/defs%3E%3Cg id='layer1' transform='translate(13.81997,-136.66645)'%3E%3Cpath style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -13.819885,140.37029 h 2.556901' id='path18' /%3E%3Cpath style='fill:url(%23pattern33);fill-opacity:1;stroke:%23000000;stroke-width:0.5;stroke-dasharray:none;paint-order:fill markers stroke' id='path21' d='m 1.6996587,147.58687 a 10.664035,10.664035 0 0 1 -7.5453294,-3.12218 10.664035,10.664035 0 0 1 -3.1246656,-7.5443 l 10.6640346,0.002 z' /%3E%3Cpath id='path23' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -13.819885,136.91659 c 0,0 1.295974,4.4e-4 2.106107,0 -0.0033,3.55259 1.408423,6.96675 3.9241648,9.48397 2.515742,2.51722 5.929061,3.93075 9.487905,3.92975 v 2.05994' /%3E%3Cpath id='path32' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -1.6629112,152.39025 v -2.48697' /%3E%3C/g%3E%3C/svg%3E%0A");
		--art-deco-h-bottom-right: url("data:image/svg+xml,%0A%3Csvg width='15.769768mm' height='15.723796mm' viewBox='0 0 15.769766 15.723796' version='1.1' xml:space='preserve' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cdefs id='defs1'%3E%3Cpattern xlink:href='%23pattern18' preserveAspectRatio='xMidYMid' id='pattern33' patternTransform='matrix(0.35355339,0.35355339,-0.35355339,0.35355339,-11.870171,-289.0567)' x='1.20000005' y='0' /%3E%3Cpattern xlink:href='%23Strips1_2' preserveAspectRatio='xMidYMid' id='pattern18' patternTransform='rotate(45)' x='1.2' y='0' /%3E%3Cpattern patternUnits='userSpaceOnUse' width='3' height='1' patternTransform='translate(0,0) scale(2,2)' preserveAspectRatio='xMidYMid' id='Strips1_2' style='fill:%23000000'%3E%3Crect style='stroke:none' x='0' y='-0.5' width='1' height='2' id='rect146' /%3E%3C/pattern%3E%3C/defs%3E%3Cg id='layer1' transform='translate(13.81997,-136.66645)'%3E%3Cpath style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -13.819885,148.68641 h 2.556901' id='path18' /%3E%3Cpath style='fill:url(%23pattern33);fill-opacity:1;stroke:%23000000;stroke-width:0.5;stroke-dasharray:none;paint-order:fill markers stroke' id='path21' d='m 1.6996587,-141.46983 a 10.664035,10.664035 0 0 1 -7.5453294,-3.12218 10.664035,10.664035 0 0 1 -3.1246656,-7.5443 l 10.6640346,0.002 z' transform='scale(1,-1)' /%3E%3Cpath id='path23' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -13.819885,152.14011 c 0,0 1.295974,-4.4e-4 2.106107,0 -0.0033,-3.55259 1.408423,-6.96675 3.9241648,-9.48397 2.515742,-2.51722 5.929061,-3.93075 9.487905,-3.92975 v -2.05994' /%3E%3Cpath id='path32' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -1.6629112,136.66645 v 2.48697' /%3E%3C/g%3E%3C/svg%3E%0A");
		--art-deco-h-bottom-left: url("data:image/svg+xml,%0A%3Csvg width='15.769768mm' height='15.723796mm' viewBox='0 0 15.769766 15.723796' version='1.1' xml:space='preserve' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cdefs id='defs1'%3E%3Cpattern xlink:href='%23pattern18' preserveAspectRatio='xMidYMid' id='pattern33' patternTransform='matrix(0.35355339,0.35355339,-0.35355339,0.35355339,4.8408399e-7,-289.0567)' x='1.20000005' y='0' /%3E%3Cpattern xlink:href='%23Strips1_2' preserveAspectRatio='xMidYMid' id='pattern18' patternTransform='rotate(45)' x='1.2' y='0' /%3E%3Cpattern patternUnits='userSpaceOnUse' width='3' height='1' patternTransform='translate(0,0) scale(2,2)' preserveAspectRatio='xMidYMid' id='Strips1_2' style='fill:%23000000'%3E%3Crect style='stroke:none' x='0' y='-0.5' width='1' height='2' id='rect146' /%3E%3C/pattern%3E%3C/defs%3E%3Cg id='layer1' transform='translate(13.81997,-136.66645)'%3E%3Cpath style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='M 1.9497135,148.68641 H -0.60718748' id='path18' /%3E%3Cpath style='fill:url(%23pattern33);fill-opacity:1;stroke:%23000000;stroke-width:0.5;stroke-dasharray:none;paint-order:fill markers stroke' id='path21' d='m 13.56983,-141.46983 a 10.664035,10.664035 0 0 1 -7.5453295,-3.12218 10.664035,10.664035 0 0 1 -3.1246656,-7.5443 l 10.6640341,0.002 z' transform='scale(-1)' /%3E%3Cpath id='path23' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m 1.9497135,152.14011 c 0,0 -1.29597398,-4.4e-4 -2.10610698,0 0.0033,-3.55259 -1.40842302,-6.96675 -3.92416482,-9.48397 -2.515742,-2.51722 -5.9290607,-3.93075 -9.4879047,-3.92975 v -2.05994' /%3E%3Cpath id='path32' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1' d='m -10.20726,136.66645 v 2.48697' /%3E%3C/g%3E%3C/svg%3E%0A");
		--art-deco-h-hline: url("data:image/svg+xml,%0A%3Csvg width='32.0854mm' height='3.9537001mm' viewBox='0 0 32.085396 3.9537' version='1.1' preserveAspectRatio='none' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cg transform='translate(-1.9497135,-136.66659)' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1'%3E%3Cpath d='M 34.035112,140.37029 H 1.9497135'/%3E%3Cpath d='M 34.035112,136.91659 H 1.9497135' /%3E%3C/g%3E%3C/svg%3E%0A");
		--art-deco-h-vline: url("data:image/svg+xml, %3Csvg width='3.9537001mm' height='32.0854mm' viewBox='0 0 3.9536996 32.085399' version='1.1' preserveAspectRatio='none' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cg transform='translate(-16.015563,-122.60074)' style='fill:none;stroke:%23000000;stroke-width:0.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1'%3E%3Cpath d='m 16.265563,154.68614 v -32.0854' /%3E%3Cpath d='m 19.719263,154.68614 v -32.0854' /%3E%3C/g%3E%3C/svg%3E%0A");
	}
}
